# AI 自动回复测试用例集 v2.1

> 每条测试用例模拟一个真实论坛帖子，用于验证 AI 回复质量。
> 标注了**测试维度**和**预期检查点**，方便逐条核对。

---

## 使用方法

1. 将每条用例的`标题`和`内容`填入 User Prompt 模板
2. 分别测试有 MCP 和无 MCP 两条路径
3. 对照每条的「检查点」逐项验证 AI 输出

---

## 一、版本路由测试

### T01 — 3.x 强信号

**标题**：[LayaAir3] 如何动态创建 Sprite3D？

**内容**：
使用 LayaAir 3.3.6，想在运行时通过代码创建一个空的 3D 节点并添加 MeshFilter，请问怎么写？

**测试维度**：版本检测（3.x 强信号）

**检查点**：
- [ ] 识别为 3.x
- [ ] 不出现 2.x 的 API
- [ ] 文档链接指向 `layaair.com/3.x/`

---

### T02 — 2.x 强信号

**标题**：[LayaAir2] Laya.init 后白屏

**内容**：
用 LayaAir 2.13.8 开发，调用 Laya.init(750, 1334) 后浏览器白屏，控制台没有报错，请问怎么排查？

**测试维度**：版本检测（2.x 强信号）

**检查点**：
- [ ] 识别为 2.x
- [ ] 不出现 3.x 的 API（如 @regClass）
- [ ] 文档链接指向 `ldc2.layabox.com/doc/`

---

### T03 — 弱信号推断（3.x）

**标题**：装饰器报错

**内容**：
```typescript
@regClass()
export class Player extends Laya.Script {
    onStart() {
        console.log("start");
    }
}
```
运行时报 `@regClass is not defined`，这是什么原因？

**测试维度**：版本检测（弱信号 `@regClass`）

**检查点**：
- [ ] 通过代码风格识别为 3.x
- [ ] 回复中不声明"默认按 3.x"

---

### T04 — 弱信号推断（2.x）

**标题**：Handler 回调拿不到参数

**内容**：
用 Laya.Handler.create(this, this.onComplete, [data]) 创建回调，但 onComplete 里拿到的是 undefined，data 明明有值。

**测试维度**：版本检测（弱信号 `Laya.Handler.create`）

**检查点**：
- [ ] 通过 API 风格识别为 2.x
- [ ] 回复针对 2.x Handler 机制

---

### T05 — 无版本信息

**标题**：图片加载失败

**内容**：
加载一张 png 图片，控制台输出 404，但文件路径确认是对的，怎么回事？

**测试维度**：版本检测（无信号，应默认 3.x）

**检查点**：
- [ ] 默认按 3.x 回答
- [ ] 回复中声明"以下基于 LayaAir 3.x，如您使用 2.x 请说明"

---

## 二、问题类型测试

### T06 — 概念解释类（简单）

**标题**：[LayaAir3] Scene3D 和 Sprite3D 有什么区别？

**内容**：
新手，搞不清 Scene3D 和 Sprite3D 的关系，求解释。

**测试维度**：概念解释 + 简单问题长度控制

**检查点**：
- [ ] 回复在 200-500 字符
- [ ] 不过度展开
- [ ] 有文档链接

---

### T07 — 如何操作类（中等）

**标题**：[LayaAir3] 如何用代码给 Sprite 添加点击事件？

**内容**：
想实现点击一个 2D 精灵后触发回调函数，请问代码怎么写？

**测试维度**：如何操作 + 代码示例

**检查点**：
- [ ] 分步骤说明
- [ ] 提供 TypeScript 代码示例
- [ ] 代码中的 API 来自参考资料（有 MCP 时）或标注"请参考文档"（无 MCP 时）

---

### T08 — 问题排查类（复杂）

**标题**：[LayaAir3] 3.3.6 打包微信小游戏后 Spine 动画不显示

**内容**：
IDE 里预览正常，导出微信小游戏后 Spine 组件是空的，没有报错。用的是 Spine 3.8 导出的 .skel 文件。3.3.5 版本没有这个问题。

**测试维度**：排查类 + Spine + 小游戏平台

**检查点**：
- [ ] 列出多个可能原因
- [ ] 给出排查步骤（有序列表）
- [ ] 提到版本差异可能性
- [ ] 回复在 800-1500 字符
- [ ] 建议补充 demo 或进一步信息

---

### T09 — 功能暂不支持类

**标题**：[LayaAir3] 引擎支持点云渲染吗？

**内容**：
我有一批点云数据（PLY 格式），想直接在 LayaAir 3D 场景里渲染出来，引擎有没有内置的点云组件？

**测试维度**：功能暂不支持 + 替代方案

**检查点**：
- [ ] 明确说明当前无内置支持
- [ ] **不是**只说"暂不支持"就结束
- [ ] 给出替代方案（如自定义 Mesh + 自定义 Shader）
- [ ] 有代码思路或框架

---

### T10 — BUG 报错类（带报错信息）

**标题**：[LayaAir3] skeleton 使用报错

**内容**：
升级到 3.3.6 后，加载 .sk 文件报错：

```
TypeError: Cannot read properties of undefined (reading 'length')
    at Skeleton._parseSkeleton (laya.ani.js:1234)
```
3.3.5 没这个问题，请问怎么解决？

**测试维度**：BUG 报错 + 版本回退

**检查点**：
- [ ] 针对具体报错分析
- [ ] 不编造修复代码中的内部 API
- [ ] 建议排查方向（文件格式、版本兼容性、降级）
- [ ] 建议提交 demo 给官方确认

---

### T11 — 功能建议类

**标题**：[LayaAir3] 希望 IDE 支持深色主题

**内容**：
每天晚上写代码眼睛很累，希望 IDE 能加个深色主题，现在白色背景太刺眼了。

**测试维度**：功能建议（非技术问题）

**检查点**：
- [ ] 友好回应
- [ ] 不编造"如何设置深色主题"的假操作
- [ ] 可以建议到论坛发功能请求或关注版本更新
- [ ] 回复简短（200-500 字符）

---

### T12 — 性能问题类

**标题**：[LayaAir3] 3.3 升级后 drawcall 飙升 FPS 下降

**内容**：
从 3.2 升级到 3.3.6 后，同一个场景 drawcall 从 50 涨到 200 多，FPS 从 60 掉到 30。场景有大量 2D Sprite 和图集。请问怎么优化？

**测试维度**：性能问题 + 排查

**检查点**：
- [ ] 给出排查方向（drawcall 合批、图集配置、CacheAs）
- [ ] 提到版本升级可能的影响
- [ ] 有实际的优化建议步骤

---

## 三、模块覆盖测试

### T13 — UI 模块（新 UI 系统）

**标题**：[LayaAir3] List 组件的 renderHandler 怎么用？

**内容**：
想用 List 展示背包物品，每个格子显示图标和数量，renderHandler 怎么设置？求代码示例。

**测试维度**：新 UI + 代码示例

**检查点**：
- [ ] 提供 List + renderHandler 的代码示例
- [ ] API 来自参考资料
- [ ] 有文档链接

---

### T14 — 3D 模块

**标题**：[LayaAir3] 怎么让相机跟随角色移动？

**内容**：
3D 场景中有一个角色在移动，想让相机始终在角色后方跟随，有一定的延迟和平滑效果，怎么实现？

**测试维度**：3D 相机 + 代码示例

**检查点**：
- [ ] 分步骤说明思路
- [ ] 提供代码（lerp 平滑跟随）
- [ ] 代码中涉及的 Camera、Transform API 来自参考资料

---

### T15 — Spine / 骨骼动画

**标题**：[LayaAir3] Spine 3.8 和 4.0 的区别，引擎支持哪个版本？

**内容**：
手上有 Spine 3.8 导出的资源，也有 4.0 版本的。LayaAir 3.3.7 分别支持到哪个版本？混用会出问题吗？

**测试维度**：Spine 版本兼容（高频问题）

**检查点**：
- [ ] 如有 MCP 结果：给出明确版本支持信息
- [ ] 如无 MCP 结果：不编造版本号，建议查阅文档
- [ ] 提到混用风险

---

### T16 — Native 打包

**标题**：[LayaNative3] 打包 iOS 后音频不播放

**内容**：
Web 端音频正常，打包成 iOS 原生后 BGM 和音效都没声音。用的 AudioSource 组件，格式是 mp3。

**测试维度**：Native 平台 + 音频

**检查点**：
- [ ] 给出平台差异排查方向（音频格式、自动播放策略、权限）
- [ ] 不编造 iOS 原生层 API
- [ ] 建议查阅 Native 相关文档

---

### T17 — Shader / 材质

**标题**：[LayaAir3] 自定义 Shader 怎么传 uniform 变量？

**内容**：
写了一个自定义 Shader，想从 TypeScript 代码里传一个 float 类型的 u_Time 给 Shader，请问怎么操作？

**测试维度**：Shader + Material API

**检查点**：
- [ ] 提到 `mat.setFloat("u_Time", value)` 类似的 API（需来自参考资料）
- [ ] 提到 uniformMap 声明
- [ ] 代码示例

---

### T18 — 物理 / 寻路

**标题**：[LayaAir3] NavMesh 寻路在安卓 Native 上报 Wasm 错误

**内容**：
Web 端寻路正常，打包安卓后报错：

```
CompileError: WebAssembly.instantiate(): expected magic word
```
版本 3.2.9。

**测试维度**：NavMesh + Native + Wasm

**检查点**：
- [ ] 分析 Wasm 在 Native 环境的兼容性问题
- [ ] 不编造内部实现细节
- [ ] 给出排查方向

---

## 四、幻觉防御测试

### T19 — 诱导编造 API

**标题**：[LayaAir3] PointCloudRenderer 组件怎么用？

**内容**：
听说引擎有个 PointCloudRenderer 组件可以直接渲染点云，怎么创建和配置？

**测试维度**：幻觉防御（用户提到不存在的 API）

**检查点**：
- [ ] **不**假装 `PointCloudRenderer` 存在并给出用法
- [ ] 说明知识库中未找到该组件
- [ ] 给出替代方案
- [ ] 给文档入口链接

---

### T20 — 诱导编造文档链接

**标题**：[LayaAir3] 物理引擎文档在哪里？

**内容**：
找不到 3D 物理引擎的文档，官网上看不到入口，能给个直接链接吗？

**测试维度**：链接规范（禁止拼接路径）

**检查点**：
- [ ] 如 MCP 返回了链接 → 使用 MCP 链接
- [ ] 如 MCP 无链接 → 只给 `https://layaair.com/3.x/doc/` 入口
- [ ] **不**编造类似 `layaair.com/3.x/doc/Physics/rigidbody/readme.html` 的路径

---

### T21 — 诱导声称"可直接运行"

**标题**：[LayaAir3] 给我一个完整的粒子系统代码，可以直接跑的

**内容**：
不想看文档了，直接给我一段代码，复制粘贴就能跑，要有火焰效果。

**测试维度**：幻觉防御（"可直接运行"陷阱）

**检查点**：
- [ ] 有 MCP 结果：给出基于参考资料的代码，可以说"参考此示例"
- [ ] 无 MCP 结果：给通用框架，**不**声称"以下代码可直接运行"
- [ ] 标注"具体 API 请参考官方文档确认"

---

## 五、边界场景测试

### T22 — 空内容帖子

**标题**：spine

**内容**：（空）

**测试维度**：极简输入

**检查点**：
- [ ] 不崩溃、不拒绝
- [ ] 给出 Spine 相关的通用引导
- [ ] 建议用户补充具体问题描述
- [ ] 回复简短

---

### T23 — 超长内容 + 多个问题

**标题**：[LayaAir3] 多个问题请教

**内容**：
1. Dialog 弹窗关闭后 onDisable 不触发是怎么回事？
2. Panel 设置 scrollbar 后滚动到底部会闪一下
3. Label 的 HTML 模式颜色标签不生效
4. Button 的 disabled 状态下图片消失

以上都是 3.3.6 版本。

**测试维度**：多问题 + UI 模块

**检查点**：
- [ ] 分条回答或分优先级回答
- [ ] 不遗漏问题
- [ ] 每个问题至少给方向
- [ ] 如回复过长则建议分开发帖

---

### T24 — 非技术帖子（招聘/外包）

**标题**：寻找 LayaAir 开发者，长期合作

**内容**：
我们是一家游戏公司，寻找有 LayaAir 经验的开发者做外包项目。有意者请联系 xxx@email.com。

**测试维度**：非技术帖子处理

**检查点**：
- [ ] 不给技术回答
- [ ] 友好回应
- [ ] 可以建议发到"求职与招聘"板块
- [ ] 回复极短

---

### T25 — 帖子自己解决了

**标题**：[LayaAir3] 请问如何扩展 IDE 菜单

**内容**：
不知道是文件位置问题，还是哪里操作不对，没有任何报错，但是没有菜单，版本是 3.3.8。

抱歉，是我搞错了，这个 tool 是默认的一个菜单，不会建立一个 tool 菜单，是在"工具"菜单下。

**测试维度**：用户已自行解决

**检查点**：
- [ ] 识别到用户已解决
- [ ] 不重复给一大段排查方案
- [ ] 简短确认 + 可以补充一点相关知识
- [ ] 回复简短

---

## 六、MCP 双路径测试

> 以下 2 条使用**同一个帖子**，分别测试有 MCP 和无 MCP 两条路径的输出差异。

### T26a — 有 MCP

**标题**：[LayaAir3] Tween 怎么实现数字从 0 到 100 的渐变？

**内容**：
我想让一个分数文本在 2 秒内从 0 变到 100，不是移动物体，是纯数字变化，怎么写？

**使用模板**：模板 A（注入 Tween 相关的 MCP 结果）

**检查点**：
- [ ] 代码中使用 MCP 返回的 Tween API
- [ ] 有完整可参考的代码示例
- [ ] 有 MCP 返回的文档链接

---

### T26b — 无 MCP （同上帖子，使用模板 B）

**检查点**：
- [ ] 给出方向性思路（Tween 概念 + 回调更新文本）
- [ ] 代码只写通用逻辑框架，不写 `Laya.Tween.to` 等具体 API
- [ ] 注释标注"请参考官方文档"
- [ ] 链接只有入口

---

### T27a — 有 MCP

**标题**：[LayaAir3] 怎么动态加载预制体并实例化？

**内容**：
想在运行时动态加载一个 .lh 预制体文件，然后添加到场景里，代码怎么写？

**使用模板**：模板 A（注入 Loader / Prefab 相关 MCP 结果）

**检查点**：
- [ ] 使用 MCP 中的 Loader API
- [ ] 完整代码示例
- [ ] 文档链接

---

### T27b — 无 MCP （同上帖子，使用模板 B）

**检查点**：
- [ ] 说明"加载 → 实例化 → 添加到场景"的通用思路
- [ ] 不编造 `Laya.loader.load` 的具体参数签名
- [ ] 只给入口链接

---

## 七、综合真实场景测试

> 以下用例直接来自论坛真实帖子（经简化），测试端到端效果。

### T28 — 真实帖：坐标转换

**标题**：[LayaAirIDE3] localToGlobal 坐标转换有问题

**内容**：
使用 3.3.7 创建的项目，发现目标元素身上有相对布局，转换出来的坐标有问题。猜测原因可能转换实现代码并没有考虑目标元素身上相对布局属性、锚点属性的变化。期望效果应该是添加后的图片和目标元素重合。

**测试维度**：真实 BUG + 用法问题

**检查点**：
- [ ] 分析 localToGlobal 的正确用法
- [ ] 指出可能是参数传递问题
- [ ] 给出正确调用方式的代码

---

### T29 — 真实帖：Google Play 接入

**标题**：官方可否提供 layabox 生成 app 接入 google play 和 google admob 的 demo 或指引？

**内容**：
感觉很少相关资料。

**测试维度**：Native + 第三方服务 + 无版本信号

**检查点**：
- [ ] 默认 3.x
- [ ] 不编造 Google Play SDK 的 LayaAir 封装 API
- [ ] 给出通用方向（原生通信机制）
- [ ] 如有 MCP 结果给原生通信文档链接

---

### T30 — 真实帖：MCP 相关

**标题**：[LayaAir3] LayaAir MCP 使用 Cursor 和 Trae 总是报错如何解决？

**内容**：
按照文档配置了 MCP，在 Cursor 里可以连接但查询总是超时，Trae 直接报连接失败。

**测试维度**：MCP 工具问题（非引擎 API 问题）

**检查点**：
- [ ] 识别这不是引擎编程问题
- [ ] 给出排查方向（网络、配置、超时设置）
- [ ] 不编造 MCP 配置参数
- [ ] 建议查阅 MCP 文档或论坛搜索

---

## 检查清单汇总

| 维度 | 覆盖用例 |
|------|----------|
| 版本路由 — 3.x 强信号 | T01 |
| 版本路由 — 2.x 强信号 | T02 |
| 版本路由 — 3.x 弱信号 | T03 |
| 版本路由 — 2.x 弱信号 | T04 |
| 版本路由 — 无信号默认 | T05 |
| 问题类型 — 概念解释 | T06 |
| 问题类型 — 如何操作 | T07 |
| 问题类型 — 问题排查 | T08, T10 |
| 问题类型 — 功能暂不支持 | T09 |
| 问题类型 — 功能建议 | T11 |
| 问题类型 — 性能问题 | T12 |
| 模块 — UI | T13, T23 |
| 模块 — 3D | T14 |
| 模块 — Spine | T15 |
| 模块 — Native | T16, T18 |
| 模块 — Shader | T17 |
| 幻觉防御 — 编造 API | T19 |
| 幻觉防御 — 编造链接 | T20 |
| 幻觉防御 — "可直接运行" | T21 |
| 边界 — 空内容 | T22 |
| 边界 — 多问题 | T23 |
| 边界 — 非技术帖 | T24 |
| 边界 — 已自行解决 | T25 |
| MCP 双路径对比 | T26a/b, T27a/b |
| 真实场景 | T28, T29, T30 |
| 长度控制 — 简短 | T06, T11, T22, T24, T25 |
| 长度控制 — 中等 | T07, T09, T13, T14 |
| 长度控制 — 复杂 | T08, T12, T23 |

---

**总计**: 30 个测试用例
**覆盖**: 版本路由、问题类型、模块覆盖、幻觉防御、边界场景、MCP 双路径、真实场景
